<!DOCTYPE html>
<html lang="el">
<head>
  <!-- ========================================================= -->
  <!-- META / SEO / PWA                                           -->
  <!-- ========================================================= -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>EURO_GOALS PRO+ v9.6.2 â€” Unified Live Expansion</title>
  <meta name="description"
        content="EURO_GOALS PRO+ v9.6.2 â€” Unified Expansion Platform integrating SmartMoney, GoalMatrix, Heatmap & History Engines" />
  <meta name="theme-color" content="#0a84ff" />

  <link rel="manifest" href="/static/manifest.json" />
  <link rel="icon" href="/static/icons/eurogoals_512.png" sizes="512x512" />
  <link rel="apple-touch-icon" href="/static/icons/eurogoals_512.png" />

  <!-- ========================================================= -->
  <!-- FONTS & STYLES                                             -->
  <!-- ========================================================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/css/unified_theme.css" />
  <link rel="stylesheet" href="/static/css/panels.css" />
  <link rel="stylesheet" href="/static/css/style.css" />
</head>

<body data-theme="dark">
  {% include "partials/unified_header.html" %}
  <section class="system-summary mt-2">
    {% include "partials/system_summary_bar_unified.html" %}
  </section>

  <!-- ========================================================= -->
  <!-- DASHBOARD GRID PANELS                                      -->
  <!-- ========================================================= -->
  <main class="p-4">
    <section class="grid-panels">

      <!-- System Status -->
      <article class="card col-4">
        {% include "partials/system_status_panel.html" %}
      </article>

      <!-- GoalMatrix / SmartMoney -->
      <article class="card col-4">
        {% include "partials/goal_matrix_panel_unified.html" %}
      </article>
      <article class="card col-4">
        {% include "partials/smartmoney_panel_unified.html" %}
      </article>

      <!-- Alerts -->
      <article class="card col-6">
        {% include "partials/alert_center_unified.html" %}
      </article>

      <!-- Heatmap -->
      <article class="card col-6 bg-neutral-900/70 text-gray-100 rounded-xl shadow p-3 backdrop-blur-md">
        <h3 class="text-lg font-semibold text-sky-400 mb-2">ğŸ”¥ Goal Heatmap</h3>
        <iframe src="/heatmap"
                loading="lazy"
                style="width:100%;height:380px;border:0;border-radius:12px;"></iframe>
      </article>

      <!-- ========================================================= -->
      <!-- ğŸ“œ Compact History Overview (Mini Stats + Button)          -->
      <!-- ========================================================= -->
      <article class="card col-12 bg-neutral-900/70 text-gray-100 rounded-xl shadow p-3 backdrop-blur-md" id="historyCompact">
        <h3 class="text-lg font-semibold text-sky-400 mb-2">ğŸ“œ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î”ÎµÎ´Î¿Î¼Î­Î½Î± (Î£ÏÎ½Î¿ÏˆÎ·)</h3>
        <p class="text-gray-400 text-sm mb-3">
          Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÎ¹Ï‚ Î±Ï€ÏŒ Ï„Î¿ ÎµÎ½Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏÎ½ EURO_GOALS PRO+.
        </p>
        <div id="history_mini" style="max-height:280px;overflow-y:auto;">
          <p>Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½...</p>
        </div>
        <div class="text-center mt-3">
          <button onclick="window.location.href='/history_unified'"
                  style="background:#00b7ff;color:#fff;border:none;padding:8px 18px;
                         border-radius:10px;font-weight:600;cursor:pointer;
                         transition:all .25s ease;">
            ğŸ” Î ÏÎ¿Î²Î¿Î»Î® Î Î»Î®ÏÎ¿Ï…Ï‚ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï
          </button>
        </div>
      </article>

    </section>
  </main>

  <!-- ========================================================= -->
  <!-- QUICK LINKS / FOOTER                                       -->
  <!-- ========================================================= -->
  <section class="text-center mt-6 mb-6 text-sm">
    <a href="/goalmatrix_panel" class="text-sky-400 hover:underline">ğŸ“Š GoalMatrix Panel</a> |
    <a href="/heatmap" class="text-sky-400 hover:underline">ğŸ”¥ Heatmap</a> |
    <a href="/smartmoney_monitor" class="text-sky-400 hover:underline">ğŸ’° SmartMoney Monitor</a> |
    <a href="/history_unified" class="text-sky-400 hover:underline">ğŸ“œ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î”ÎµÎ´Î¿Î¼Î­Î½Î±</a>
  </section>

  {% include "partials/system_controls_modal.html" %}

  <footer class="footer text-center text-xs text-gray-500 py-4">
    Â© 2025 EURO_GOALS PRO+ | Unified Expansion Interface v9.6.2
  </footer>

  <!-- ========================================================= -->
  <!-- SCRIPTS                                                    -->
  <!-- ========================================================= -->
  <script src="/static/js/ui_animations.js"></script>
  <script src="/static/js/ui_controls.js"></script>
  <script src="/static/js/system_summary.js"></script>
  <script src="/static/js/goalmatrix_panel.js"></script>
  <script src="/static/js/smartmoney_panel.js"></script>
  <script src="/static/js/heatmap.js"></script>
  <script src="/static/js/unified_expansion.js"></script>
  <script src="/static/js/theme_toggle.js"></script>

  <!-- ========================================================= -->
  <!-- INLINE FETCHERS                                            -->
  <!-- ========================================================= -->
  <script>
    async function loadMiniHistory() {
      const el = document.getElementById("history_mini");
      try {
        const resp = await fetch("/api/history");
        const data = await resp.json();
        const items = data.history.slice(0, 10); // Î¼ÏŒÎ½Î¿ 10 Î³Î¹Î± compact view
        const total = data.history.length || 0;
        el.innerHTML = `
          <p class="text-xs text-gray-400 mb-2">Î£ÏÎ½Î¿Î»Î¿ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Ï‰Î½: ${total} Î±Î³ÏÎ½ÎµÏ‚</p>
          <table class="w-full text-sm border-collapse">
            <thead class="bg-gray-800 text-sky-400 sticky top-0">
              <tr>
                <th class="p-2 text-left">Î”Î¹Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ·</th>
                <th class="p-2 text-left">Î‘Î³ÏÎ½Î±Ï‚</th>
                <th class="p-2 text-right">Î‘Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î±</th>
              </tr>
            </thead>
            <tbody>
              ${items.map(m => `
                <tr class="hover:bg-neutral-800/60 transition">
                  <td class="p-2">${m.league || '-'}</td>
                  <td class="p-2">${m.home_team || '-'} vs ${m.away_team || '-'}</td>
                  <td class="p-2 text-right">${m.score || '-'}</td>
                </tr>`).join('')}
            </tbody>
          </table>`;
      } catch (err) {
        el.innerHTML = `<p style="color:#f66;">âš  Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï.</p>`;
      }
    }
    window.addEventListener("load", loadMiniHistory);
  </script>

  <!-- ========================================================= -->
  <!-- SERVICE WORKER REGISTRATION                                -->
  <!-- ========================================================= -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("/static/service-worker.js")
          .then(reg => console.log("[EURO_GOALS] âœ… Service Worker:", reg.scope))
          .catch(err => console.warn("[EURO_GOALS] âš ï¸ SW registration failed:", err));
      });
    }
  </script>
</body>
</html>
