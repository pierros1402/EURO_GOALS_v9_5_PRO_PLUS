<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>EURO_GOALS v9.4.3 PRO+ Ultimate Dashboard</title>
  <link rel="icon" href="/static/icons/ball.png">
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root { --bg-dark:#0d1117; --bg-light:#f5f5f5; --text-dark:#e6edf3; --text-light:#222; --accent:#58a6ff; }
    body{background:var(--bg-dark);color:var(--text-dark);font-family:"Segoe UI",Roboto,sans-serif;margin:0;transition:background .3s,color .3s;}
    header{background:#161b22;border-bottom:2px solid #30363d;text-align:center;padding:25px 10px;}
    header h1{color:var(--accent);margin:0 0 5px;}
    header p{color:#8b949e;margin:0;font-size:14px;}
    .controls{display:flex;justify-content:center;gap:10px;margin:15px auto;}
    .controls button{background:#2563eb;color:#fff;border:0;border-radius:8px;padding:8px 14px;cursor:pointer;font-size:14px;}
    main{padding:30px;text-align:center;}
    main .links button{background:#2563eb;color:#fff;border:0;border-radius:8px;padding:12px 22px;margin:12px;cursor:pointer;font-size:16px;}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;max-width:1100px;margin:20px auto;}
    canvas{background:#111827;border-radius:12px;padding:5px;box-shadow:0 0 5px #000 inset;}
    footer{text-align:center;margin-top:40px;padding:20px;color:#8b949e;border-top:1px solid #30363d;}
    body.light{background:var(--bg-light);color:var(--text-light);}
  </style>
</head>
<body>

  {% include "system_summary_bar.html" %}

  <header>
    <h1>âš½ EURO_GOALS v9.4.3 PRO+ Ultimate Dashboard</h1>
    <p>SmartMoney Auto-Notifier â€¢ Real APIs â€¢ AI Analyzer â€¢ Push</p>
  </header>

  <div class="controls">
    <button id="muteBtn">ğŸ”Š Mute</button>
    <button id="modeBtn">ğŸŒ™ Dark</button>
    <button onclick="location.href='/health'">â¤ï¸ Health</button>
    <button id="enablePushBtn">ğŸ”” Enable Push</button>
    <button id="testPushBtn">ğŸ§ª Test Push</button>
  </div>

  <main>
    <div class="links">
      <button onclick="location.href='/alert_history'">ğŸ“œ Alert History</button>
      <button onclick="location.href='/smartmoney/logs'">ğŸ’° SmartMoney Logs</button>
    </div>

    <!-- ğŸ“ˆ Mini Charts -->
    <div class="grid">
      <div>
        <h3>ğŸ“Š SmartMoney Activity (alerts/min)</h3>
        <canvas id="miniVolChart" height="140"></canvas>
      </div>
      <div>
        <h3>ğŸ“‰ Avg Odds Drop (%)</h3>
        <canvas id="miniDropChart" height="140"></canvas>
      </div>
    </div>

    <!-- ğŸ§  AI Analyzer -->
    <div style="max-width:1100px;margin:20px auto;text-align:left;">
      <h3>ğŸ§  Top SmartMoney Signals (AI)</h3>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm" style="width:100%;border-collapse:collapse;">
          <thead style="background:#161b22;color:#58a6ff;">
            <tr>
              <th>Time</th><th>Match</th><th>Bookmaker</th><th>Market</th><th>Pick</th><th>Odds</th><th>Î”%</th><th>AI Tier (Score)</th>
            </tr>
          </thead>
          <tbody id="ai-signals-body"></tbody>
        </table>
      </div>
    </div>
  </main>

  <footer>EURO_GOALS v9.4.3 PRO+ Ultimate | Build: 04/11/2025</footer>

  <script type="module">
    import { enablePush, testPush } from "/static/js/push_client.js";
    import { refreshDashboardCharts } from "/static/js/dashboard_charts.js";
    import { refreshAISignals } from "/static/js/ai_signals.js";

    const muteBtn = document.getElementById("muteBtn");
    const modeBtn = document.getElementById("modeBtn");
    const enableBtn = document.getElementById("enablePushBtn");
    const testBtn = document.getElementById("testPushBtn");

    let muted = localStorage.getItem("smartmoneyMuted") === "true";
    let darkMode = localStorage.getItem("smartmoneyDark") !== "false";
    document.body.classList.toggle("light", !darkMode);
    modeBtn.textContent = darkMode ? "ğŸŒ™ Dark" : "â˜€ï¸ Light";
    muteBtn.textContent = muted ? "ğŸ”‡ Unmute" : "ğŸ”Š Mute";

    muteBtn.onclick = () => {
      muted = !muted;
      localStorage.setItem("smartmoneyMuted", muted);
      muteBtn.textContent = muted ? "ğŸ”‡ Unmute" : "ğŸ”Š Mute";
    };
    modeBtn.onclick = () => {
      darkMode = !darkMode;
      localStorage.setItem("smartmoneyDark", darkMode);
      document.body.classList.toggle("light", !darkMode);
      modeBtn.textContent = darkMode ? "ğŸŒ™ Dark" : "â˜€ï¸ Light";
    };

    enableBtn.onclick = () => enablePush();
    testBtn.onclick = () => testPush();

    // Initial & periodic refresh
    refreshDashboardCharts();
    refreshAISignals();
    setInterval(() => { refreshDashboardCharts(); refreshAISignals(); }, 60000);
  </script>
</body>
</html>
