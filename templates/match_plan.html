<!-- ============================================================
     EURO_GOALS PRO+ v9.6.5 â€” Match Plan (15 Days Unified)
     ============================================================ -->
<section class="match-plan bg-neutral-900/70 text-gray-100 rounded-xl shadow p-4 backdrop-blur-md">
  <header class="flex flex-col sm:flex-row justify-between sm:items-center mb-3 gap-2">
    <div>
      <h2 class="text-xl font-semibold text-sky-400 mb-1">ğŸ“… Î Î»Î¬Î½Î¿ Î‘Î³ÏÎ½Ï‰Î½ (15 Î—Î¼ÎµÏÏÎ½)</h2>
      <p class="text-gray-400 text-sm">
        Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· 7 Î·Î¼ÎµÏÏÎ½ Ï€ÏÎ¹Î½, ÏƒÎ®Î¼ÎµÏÎ± ÎºÎ±Î¹ 7 Î·Î¼ÎµÏÏÎ½ Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ Ï„Î¹Ï‚ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼ÎµÏ‚ Î»Î¯Î³ÎºÎµÏ‚ EURO_GOALS PRO+.
      </p>
    </div>
    <div class="flex gap-2">
      <select id="countrySelect" class="bg-gray-800 text-white rounded px-2 py-1 text-sm"></select>
      <select id="leagueSelect" class="bg-gray-800 text-white rounded px-2 py-1 text-sm"></select>
      <button id="refreshPlan" class="text-xs px-3 py-1 bg-sky-700 text-white rounded hover:bg-sky-600 transition">
        ğŸ”„ Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·
      </button>
    </div>
  </header>

  <div id="plan-container" class="overflow-y-auto max-h-[650px] border-t border-gray-800">
    <p class="text-center text-gray-400 p-3">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚...</p>
  </div>

  <footer class="text-xs text-gray-500 mt-3">
    * Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î±Î½Î­Ï‰ÏƒÎ· ÎºÎ¬Î¸Îµ 90 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±.
  </footer>
</section>

<script>
  // ============================================================
  // EURO_GOALS â€” MATCH PLAN FETCHER
  // ============================================================
  const countrySelect = document.getElementById("countrySelect");
  const leagueSelect = document.getElementById("leagueSelect");
  const planContainer = document.getElementById("plan-container");

  async function loadLeagues() {
    try {
      const resp = await fetch("/api/leagues");
      const data = await resp.json();
      const countries = data.countries || {};
      countrySelect.innerHTML = `<option value="">ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î§ÏÏÎµÏ‚</option>`;
      for (const [country, leagues] of Object.entries(countries)) {
        const opt = document.createElement("option");
        opt.value = country;
        opt.textContent = country;
        countrySelect.appendChild(opt);
      }
      countrySelect.addEventListener("change", () => {
        const selected = countries[countrySelect.value] || [];
        leagueSelect.innerHTML = `<option value="">ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î”Î¹Î¿ÏÎ³Î±Î½ÏÏƒÎµÎ¹Ï‚</option>`;
        selected.forEach(l => {
          const opt = document.createElement("option");
          opt.value = l.id;
          opt.textContent = l.name;
          leagueSelect.appendChild(opt);
        });
      });
    } catch (err) {
      console.error("âš ï¸ Error loading leagues:", err);
    }
  }

  async function loadMatchPlan() {
    planContainer.innerHTML = `<p class="text-center text-gray-400 p-3">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚...</p>`;
    const params = new URLSearchParams();
    if (countrySelect.value) params.append("country", countrySelect.value);
    if (leagueSelect.value) params.append("league", leagueSelect.value);

    try {
      const resp = await fetch(`/api/matchplan?${params.toString()}`);
      const data = await resp.json();
      const days = data.days || [];

      if (!days.length) {
        planContainer.innerHTML = `<p class="text-center text-gray-400 p-3">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Î¹ Î±Î³ÏÎ½ÎµÏ‚ Î³Î¹Î± Ï„Î¹Ï‚ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½ÎµÏ‚ Î·Î¼Î­ÏÎµÏ‚.</p>`;
        return;
      }

      planContainer.innerHTML = days.map(day => `
        <div class="mb-4">
          <div class="bg-gray-800/90 text-sky-400 font-semibold py-1.5 px-3 rounded-t">
            ${day.date_label}
          </div>
          <table class="w-full text-sm border-collapse">
            <thead class="bg-gray-900 text-gray-400 sticky top-0">
              <tr>
                <th class="p-2 text-left">Î”Î¹Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ·</th>
                <th class="p-2 text-left">Î‘Î³ÏÎ½Î±Ï‚</th>
                <th class="p-2 text-right">ÎÏÎ± / Î‘Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î±</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-800">
              ${day.matches.map(m => `
                <tr class="hover:bg-neutral-800/60 transition">
                  <td class="p-2">${m.league || '-'}</td>
                  <td class="p-2">${m.home_team} vs ${m.away_team}</td>
                  <td class="p-2 text-right">
                    ${m.status === 'live' 
                      ? `<span class="text-red-400 font-semibold animate-pulse">LIVE ${m.score}</span>` 
                      : (m.score ? m.score : m.time || '-')}
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `).join('');
    } catch (err) {
      console.error("âš ï¸ Error loading match plan:", err);
      planContainer.innerHTML = `<p class="text-center text-red-400 p-3">Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚ Î±Î³ÏÎ½Ï‰Î½.</p>`;
    }
  }

  document.getElementById("refreshPlan").addEventListener("click", loadMatchPlan);
  loadLeagues().then(loadMatchPlan);
  setInterval(loadMatchPlan, 90000);
</script>
