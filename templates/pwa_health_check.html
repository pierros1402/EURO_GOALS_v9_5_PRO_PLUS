<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PWA Health Check â€” EURO_GOALS PRO+</title>
  <link rel="stylesheet" href="/static/css/unified_theme.css" />
  <link rel="stylesheet" href="/static/css/style.css" />
  <style>
    body {
      font-family: "Inter", sans-serif;
      background: #0a0a0a;
      color: #fff;
      padding: 2rem;
    }
    .card {
      background: #111a22;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }
    .ok { color: #00ff88; font-weight: bold; }
    .fail { color: #ff5555; font-weight: bold; }
  </style>
</head>
<body>
  <h1 class="text-2xl font-bold text-sky-400 mb-4">âš™ï¸ PWA Health Check â€” EURO_GOALS PRO+</h1>

  <div id="results" class="card">
    <p>ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Ï‰Î½ PWA...</p>
  </div>

  <script>
    async function runCheck() {
      const results = [];

      // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Manifest
      try {
        const manifest = await fetch("/static/manifest.json");
        results.push(manifest.ok
          ? "ğŸ“„ Manifest: <span class='ok'>OK</span>"
          : "ğŸ“„ Manifest: <span class='fail'>Î£Ï†Î¬Î»Î¼Î±</span>");
      } catch {
        results.push("ğŸ“„ Manifest: <span class='fail'>Î£Ï†Î¬Î»Î¼Î±</span>");
      }

      // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Service Worker
      if ("serviceWorker" in navigator) {
        try {
          const reg = await navigator.serviceWorker.getRegistration();
          if (reg) {
            results.push(`ğŸ”§ Service Worker: <span class='ok'>Î•Î½ÎµÏÎ³ÏŒÏ‚ (${reg.scope})</span>`);
          } else {
            results.push("ğŸ”§ Service Worker: <span class='fail'>Î‘Î½ÎµÎ½ÎµÏÎ³ÏŒÏ‚</span>");
          }
        } catch {
          results.push("ğŸ”§ Service Worker: <span class='fail'>Î£Ï†Î¬Î»Î¼Î±</span>");
        }
      } else {
        results.push("ğŸ”§ Service Worker: <span class='fail'>Î”ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÏ„Î±Î¹</span>");
      }

      // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Icons
      const icon192 = new Image();
      icon192.src = "/static/icons/eurogoals_192.png";
      icon192.onload = () => results.push("ğŸ–¼ï¸ Icon 192x192: <span class='ok'>OK</span>");
      icon192.onerror = () => results.push("ğŸ–¼ï¸ Icon 192x192: <span class='fail'>Î£Ï†Î¬Î»Î¼Î±</span>");

      const icon512 = new Image();
      icon512.src = "/static/icons/eurogoals_512.png";
      icon512.onload = () => results.push("ğŸ–¼ï¸ Icon 512x512: <span class='ok'>OK</span>");
      icon512.onerror = () => results.push("ğŸ–¼ï¸ Icon 512x512: <span class='fail'>Î£Ï†Î¬Î»Î¼Î±</span>");

      // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Cache API
      if ("caches" in window) {
        const keys = await caches.keys();
        if (keys.length > 0) {
          results.push(`ğŸ’¾ Cache: <span class='ok'>${keys.join(", ")}</span>`);
        } else {
          results.push("ğŸ’¾ Cache: <span class='fail'>ÎšÎµÎ½ÏŒ</span>");
        }
      } else {
        results.push("ğŸ’¾ Cache API: <span class='fail'>Î”ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÏ„Î±Î¹</span>");
      }

      // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½
      document.getElementById("results").innerHTML = `
        <h2 class="text-lg mb-3 text-sky-400">Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î•Î»Î­Î³Ï‡Î¿Ï…:</h2>
        <ul>${results.map(r => `<li class="mb-1">${r}</li>`).join("")}</ul>
      `;
    }

    runCheck();
  </script>
</body>
</html>
