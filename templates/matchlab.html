<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>AI MatchLab v0.9.3 PREMIUM</title>

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#050815" />

    <!-- Icons -->
    <link rel="apple-touch-icon" href="/static/icons/aimatchlab_192.png" />
    <link rel="apple-touch-icon" href="/static/icons/aimatchlab_512.png" />
    <link rel="icon" href="/static/icons/aimatchlab_192.png" />

    <!-- Main UI CSS -->
    <link rel="stylesheet" href="/static/css/aimatchlab.css" />
</head>
<body class="aiml-body">

    <!-- TOP BAR -->
    <header class="aiml-header">
        <div class="aiml-logo-title">
            <div class="aiml-logo-circle">AI</div>
            <div class="aiml-title-block">
                <div class="aiml-title">AI MATCHLAB</div>
                <div class="aiml-subtitle">Advanced Live Intelligence Engine</div>
            </div>
        </div>

        <div class="aiml-header-badges">
            <span class="aiml-badge env">ENV: DEVELOPMENT</span>
            <span class="aiml-badge version">v0.9.3 PREMIUM</span>
            <button id="refreshBtn" class="aiml-refresh-btn">⟳ Refresh now</button>
        </div>
    </header>

    <!-- STATUS SUMMARY BAR -->
    <section class="aiml-summary-bar">
        <div class="aiml-summary-card" id="backendSummary">
            <div class="aiml-summary-label">BACKEND</div>
            <div class="aiml-summary-value aiml-summary-ok">Online</div>
            <div class="aiml-summary-caption">FastAPI core status</div>
        </div>

        <div class="aiml-summary-card" id="workerSummary">
            <div class="aiml-summary-label">WORKER</div>
            <div class="aiml-summary-value aiml-summary-issue" id="workerStatusChip">Checking…</div>
            <div class="aiml-summary-caption" id="workerSummaryCaption">Matching engine</div>
        </div>

        <div class="aiml-summary-card" id="feedSummary">
            <div class="aiml-summary-label">LIVE FEED</div>
            <div class="aiml-summary-value aiml-summary-issue" id="feedStatusChip">No data</div>
            <div class="aiml-summary-caption">Source A (SofaScore)</div>
        </div>
    </section>

    <!-- MAIN GRID -->
    <main class="aiml-main-grid">
        <!-- LIVE MATRIX -->
        <section class="aiml-panel aiml-live-panel">
            <div class="aiml-panel-header">
                <div>
                    <div class="aiml-panel-title">AI MatchLab – Live Matrix</div>
                    <div class="aiml-panel-subtitle">Unified view of LIVE / RECENT / UPCOMING matches.</div>
                </div>
                <div class="aiml-tabs">
                    <button class="aiml-tab aiml-tab-active" data-filter="all">All</button>
                    <button class="aiml-tab" data-filter="live">Live</button>
                    <button class="aiml-tab" data-filter="recent">Recent</button>
                    <button class="aiml-tab" data-filter="upcoming">Upcoming</button>
                </div>
            </div>

            <div id="liveContainer" class="aiml-live-container">
                <div class="aiml-placeholder">
                    Waiting for live data…
                </div>
            </div>
        </section>

        <!-- SYSTEM MONITOR -->
        <aside class="aiml-panel aiml-monitor-panel">
            <div class="aiml-panel-header">
                <div>
                    <div class="aiml-panel-title">AI System Monitor</div>
                    <div class="aiml-panel-subtitle">Worker & feed diagnostics.</div>
                </div>
            </div>

            <div class="aiml-monitor-block">
                <div class="aiml-monitor-title">Worker Status (/status)</div>
                <pre id="statusBox" class="aiml-monitor-pre">
Loading…
                </pre>
            </div>

            <div class="aiml-monitor-block">
                <div class="aiml-monitor-title">Last Live Payload (/live)</div>
                <pre id="liveDebugBox" class="aiml-monitor-pre">
Waiting for first payload…
                </pre>
            </div>
        </aside>
    </main>

    <!-- DEBUG PANEL (FULL JSON) -->
    <section class="aiml-debug-section">
        <div class="aiml-debug-title">Debug Panel</div>
        <pre id="debugPanel" class="aiml-debug-pre">Waiting for combined debug data…</pre>
    </section>

    <!-- LEGAL FOOTER -->
    <footer class="aiml-footer">
        <a href="/legal/terms">Terms</a>
        <a href="/legal/privacy">Privacy</a>
        <a href="/legal/cookies">Cookies</a>
        <a href="/legal/responsible-gambling">Responsible Gambling</a>
    </footer>

    <!-- MAIN FRONTEND ENGINE -->
    <script src="/static/js/aimatchlab.js?v=0.9.3"></script>

    <!-- SERVICE WORKER REG -->
    <script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("/service-worker.js")
                .then(reg => console.log("[SW] Registered:", reg.scope))
                .catch(err => console.error("[SW] Registration failed:", err));
        });
    }
    </script>
</body>
</html>
