<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>AI MatchLab v0.9.3 PREMIUM</title>

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#050815" />

    <!-- iOS fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="AI MatchLab" />

    <!-- Icons -->
    <link rel="apple-touch-icon" href="/static/icons/aimatchlab_192.png" />
    <link rel="apple-touch-icon" href="/static/icons/aimatchlab_512.png" />
    <link rel="icon" href="/static/icons/aimatchlab_192.png" />

    <!-- Main UI CSS -->
    <link rel="stylesheet" href="/static/css/aimatchlab.css" />
</head>
<body class="aiml-body">

    <!-- HEADER -->
    <header class="aiml-header">
        <div class="aiml-header-left">
            <div class="aiml-logo-circle">AI</div>
            <div class="aiml-title-block">
                <div class="aiml-title">AI MATCHLAB</div>
                <div class="aiml-subtitle">Advanced Live Intelligence Engine</div>
            </div>

            <div class="aiml-header-badges">
                <span class="aiml-badge env">ENV: DEVELOPMENT</span>
                <span class="aiml-badge version">v0.9.3 PREMIUM</span>
            </div>
        </div>

        <div class="aiml-header-right">
            <button id="themeToggleBtn" class="aiml-header-btn aiml-theme-btn" title="Change theme">
                ðŸŽ¨ Theme
            </button>
            <button id="installBtn" class="aiml-header-btn aiml-install-btn" style="display:none;">
                â¬‡ Install
            </button>
            <button id="refreshBtn" class="aiml-header-btn aiml-refresh-btn">
                âŸ³ Refresh now
            </button>
        </div>
    </header>

    <!-- SUMMARY BAR -->
    <section class="aiml-summary-bar">
        <div class="aiml-summary-card">
            <div class="aiml-summary-label">BACKEND</div>
            <div id="backendStatusValue" class="aiml-summary-value aiml-summary-ok">Online</div>
            <div class="aiml-summary-caption">FastAPI core status</div>
        </div>

        <div class="aiml-summary-card">
            <div class="aiml-summary-label">WORKER</div>
            <div id="workerStatusValue" class="aiml-summary-value aiml-summary-issue">Checkingâ€¦</div>
            <div id="workerSummaryCaption" class="aiml-summary-caption">
                Matching engine
            </div>
        </div>

        <div class="aiml-summary-card">
            <div class="aiml-summary-label">LIVE FEED</div>
            <div id="feedStatusValue" class="aiml-summary-value aiml-summary-issue">
                No data
            </div>
            <div id="feedSummaryCaption" class="aiml-summary-caption">
                Source A (SofaScore)
            </div>
        </div>
    </section>

    <!-- MAIN GRID -->
    <main class="aiml-main-grid">
        <!-- LIVE MATRIX -->
        <section class="aiml-panel aiml-live-panel">
            <div class="aiml-panel-header">
                <div>
                    <div class="aiml-panel-title">AI MatchLab â€“ Live Matrix</div>
                    <div class="aiml-panel-subtitle">
                        Unified view of LIVE / RECENT / UPCOMING matches.
                    </div>
                </div>
                <div class="aiml-tabs">
                    <button id="btnAll" class="aiml-tab aiml-tab-active" data-filter="all">All</button>
                    <button id="btnLive" class="aiml-tab" data-filter="live">Live</button>
                    <button id="btnRecent" class="aiml-tab" data-filter="recent">Recent</button>
                    <button id="btnUpcoming" class="aiml-tab" data-filter="upcoming">Upcoming</button>
                </div>
            </div>

            <div id="liveContainer" class="aiml-live-container">
                <!-- Skeleton loader on first load -->
                <div class="aiml-skeleton-list" id="liveSkeleton">
                    <div class="aiml-skeleton-card"></div>
                    <div class="aiml-skeleton-card"></div>
                    <div class="aiml-skeleton-card"></div>
                    <div class="aiml-skeleton-card"></div>
                </div>
                <div class="aiml-placeholder" id="livePlaceholder" style="display:none;">
                    Waiting for live dataâ€¦
                </div>
            </div>
        </section>

        <!-- SYSTEM MONITOR -->
        <aside class="aiml-panel aiml-monitor-panel">
            <div class="aiml-panel-header">
                <div>
                    <div class="aiml-panel-title">AI System Monitor</div>
                    <div class="aiml-panel-subtitle">Worker &amp; feed diagnostics.</div>
                </div>
            </div>

            <div class="aiml-monitor-block">
                <div class="aiml-monitor-title">Worker Status (/ai/status)</div>
                <pre id="statusBox" class="aiml-monitor-pre">
Loadingâ€¦
                </pre>
            </div>

            <div class="aiml-monitor-block">
                <div class="aiml-monitor-title">Last Live Payload (/ai/source-a/live)</div>
                <pre id="liveDebugBox" class="aiml-monitor-pre">
Waiting for first payloadâ€¦
                </pre>
            </div>
        </aside>
    </main>

    <!-- DEBUG PANEL -->
    <section class="aiml-debug-section">
        <div class="aiml-debug-header">
            <span class="aiml-debug-title">Debug Panel</span>
            <button id="toggleDebugBtn" class="aiml-debug-toggle-btn">Collapse</button>
        </div>
        <pre id="debugPanel" class="aiml-debug-pre">
Waiting for combined debug dataâ€¦
        </pre>
    </section>

    <!-- GOAL FLASH OVERLAY (optional use by JS) -->
    <div id="goalFlashOverlay" class="aiml-goal-overlay" style="display:none;">
        GOAL!
    </div>

    <!-- LEGAL FOOTER -->
    <footer class="aiml-footer">
        <a href="/legal/terms">Terms</a>
        <a href="/legal/privacy">Privacy</a>
        <a href="/legal/cookies">Cookies</a>
        <a href="/legal/responsible-gambling">Responsible Gambling</a>
    </footer>

    <!-- MAIN FRONTEND ENGINE -->
    <script src="/static/js/aimatchlab.js?v=0.9.3"></script>

    <!-- SERVICE WORKER REG -->
    <script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("/service-worker.js")
                .then(reg => console.log("[SW] Registered:", reg.scope))
                .catch(err => console.error("[SW] Registration failed:", err));
        });
    }
    </script>
</body>
</html>
