<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EURO_GOALS PRO+ â€” Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ & Î›Î¯Î³ÎºÎµÏ‚</title>
  <style>
    body {
      font-family: ui-sans-serif, system-ui;
      background: #0b1220;
      color: #e6eefc;
      margin: 0;
      padding: 0;
    }
    header {
      background: #0d1528;
      padding: 12px 18px;
      font-size: 1.1rem;
      font-weight: 600;
      border-bottom: 1px solid #1a2740;
    }
    main { padding: 16px; }
    select, button {
      background: #1a2740;
      color: #e6eefc;
      border: 1px solid #2b3a5a;
      border-radius: 6px;
      padding: 6px 10px;
      margin-right: 8px;
    }
    button:hover { background: #0a84ff; cursor: pointer; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
      font-size: 0.9rem;
    }
    th, td {
      border: 1px solid #1e2d4a;
      padding: 6px 8px;
      text-align: center;
    }
    th { background: #0a84ff33; }
    tr:nth-child(even) { background: #0d1528; }
    .empty { color: #999; font-style: italic; margin-top: 10px; }
    .summary { margin-top: 8px; font-size: 0.9rem; color: #8aa3c7; }
  </style>
</head>
<body>
  <header>âš™ï¸ EURO_GOALS PRO+ â€” Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ & Î›Î¯Î³ÎºÎµÏ‚</header>
  <main>
    <section>
      <h3>Î•Ï€Î¹Î»Î¿Î³Î® Î ÏÏ‰Ï„Î±Î¸Î»Î®Î¼Î±Ï„Î¿Ï‚</h3>
      <form method="get">
        <label for="league">Î›Î¯Î³ÎºÎ±:</label>
        <select id="league" name="league">
          {% for lg in leagues %}
          <option value="{{lg}}" {% if lg == current %}selected{% endif %}>{{lg}}</option>
          {% endfor %}
        </select>
        <button type="submit">Î ÏÎ¿Î²Î¿Î»Î®</button>
        <button type="button" onclick="refreshLeague()">ğŸ” Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·</button>
      </form>
    </section>

    {% if table %}
    <section>
      <h3>ğŸ“Š Î’Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î± {{ current }}</h3>
      <div class="summary">Î£ÏÎ½Î¿Î»Î¿ Î¿Î¼Î¬Î´Ï‰Î½: {{ table|length }}</div>
      <table>
        <thead>
          <tr><th>Î˜Î­ÏƒÎ·</th><th>ÎŸÎ¼Î¬Î´Î±</th><th>Î‘Î³ÏÎ½ÎµÏ‚</th><th>Î</th><th>Î™</th><th>Î—</th><th>Î¤Î­ÏÎ¼.</th><th>Î”Î¹Î±Ï†.</th><th>Î’Î±Î¸Î¼Î¿Î¯</th></tr>
        </thead>
        <tbody>
        {% for r in table %}
          <tr>
            <td>{{r.pos}}</td>
            <td style="text-align:left">{{r.team}}</td>
            <td>{{r.p or '-'}}</td>
            <td>{{r.w or '-'}}</td>
            <td>{{r.d or '-'}}</td>
            <td>{{r.l or '-'}}</td>
            <td>{{r.gf or '-'}}-{{r.ga or '-'}}</td>
            <td>{{r.gd or '-'}}</td>
            <td>{{r.pts or '-'}}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </section>
    {% else %}
      <p class="empty">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½Î± standings Î³Î¹Î± Ï„Î¿ {{ current }}.</p>
    {% endif %}

    {% if fixtures %}
    <section>
      <h3>ğŸ“… Î‘Î³ÏÎ½ÎµÏ‚ / Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±</h3>
      <div class="summary">Î£ÏÎ½Î¿Î»Î¿ Î±Î³ÏÎ½Ï‰Î½: {{ fixtures|length }}</div>
      <table>
        <thead><tr><th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th><th>Î“Î·Ï€ÎµÎ´Î¿ÏÏ‡Î¿Ï‚</th><th>Î¦Î¹Î»Î¿Î¾ÎµÎ½Î¿ÏÎ¼ÎµÎ½Î¿Ï‚</th><th>Î£ÎºÎ¿Ï</th><th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th></tr></thead>
        <tbody>
        {% for m in fixtures %}
          <tr>
            <td>{{m.date or '-'}}</td>
            <td style="text-align:left">{{m.home}}</td>
            <td style="text-align:left">{{m.away}}</td>
            <td>{% if m.hs is not none %}{{m.hs}} - {{m.as}}{% else %}-{% endif %}</td>
            <td>{{m.status}}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </section>
    {% endif %}
  </main>

  <script>
    async function refreshLeague(){
      const league = document.getElementById('league').value;
      alert("ğŸ”„ Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î³Î¹Î± " + league + "...");
      try {
        const r = await fetch("/refresh_league?league=" + encodeURIComponent(league));
        const data = await r.json();
        alert("âœ… " + (data.message || "Î‘Î½Î±Î½ÎµÏÎ¸Î·ÎºÎµ!"));
        location.reload();
      } catch (e) {
        alert("âŒ Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î±: " + e);
      }
    }
  </script>
</body>
</html>
