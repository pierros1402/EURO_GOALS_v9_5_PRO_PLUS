<!-- ============================================================
     EURO_GOALS v9.6.1 PRO+ â€” GoalMatrix Panel (Unified Style)
============================================================ -->
<section class="card bg-neutral-900/70 text-gray-100 rounded-xl shadow p-3 backdrop-blur-md transition-all">
  <header class="flex justify-between items-center mb-2">
    <h3 class="text-lg font-semibold text-sky-400">ğŸ¯ GoalMatrix Engine</h3>
    <span id="gm-status-pill" class="px-2 py-1 rounded text-xs bg-gray-600 text-white">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...</span>
  </header>

  <div class="flex flex-wrap justify-between text-sm mb-2 text-gray-300">
    <span id="gm-summary-total">Î‘Î³ÏÎ½ÎµÏ‚: 0</span>
    <span id="gm-summary-updated">Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·: --:--:--</span>
    <button id="gm-refresh" class="text-xs px-2 py-1 bg-sky-700 text-white rounded hover:bg-sky-600 transition">
      ğŸ”„ Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·
    </button>
  </div>

  <!-- Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Ï€ÎµÏÏ‡ÏŒÎ¼ÎµÎ½Ï‰Î½ Î‘Î³ÏÎ½Ï‰Î½ -->
  <div class="overflow-x-auto max-h-[420px] border-t border-gray-800">
    <table class="w-full text-sm border-collapse">
      <thead class="bg-gray-800 text-sky-400 sticky top-0 z-10">
        <tr>
          <th class="p-2 text-left">League</th>
          <th class="p-2 text-left">Match</th>
          <th class="p-2 text-right">Opening</th>
          <th class="p-2 text-right">Current</th>
          <th class="p-2 text-center">Movement</th>
        </tr>
      </thead>
      <tbody id="gm-body" class="divide-y divide-gray-700 text-gray-200">
        <tr>
          <td colspan="5" class="p-3 text-center text-gray-400">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ GoalMatrix...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Î ÏÏŒÏƒÏ†Î±Ï„ÎµÏ‚ Î±Î½Ï„Î¹ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ -->
  <div id="gm-replaced" class="mt-3 text-xs text-gray-400 max-h-[140px] overflow-y-auto border-t border-gray-800 pt-2 hidden">
    <h4 class="text-sky-400 font-semibold mb-1">ğŸ“‹ Replaced Matches</h4>
    <ul id="gm-replaced-list" class="space-y-1"></ul>
  </div>

  <footer class="text-xs text-gray-500 mt-2">
    * Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎ¬Î¸Îµ 30s â€” Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· 10 ÎºÎ¿ÏÏ…Ï†Î±Î¯Ï‰Î½ Î¼ÎµÏ„Î±Î²Î¿Î»ÏÎ½ ÎµÏ€ÎµÏÏ‡ÏŒÎ¼ÎµÎ½Ï‰Î½ Î±Î³ÏÎ½Ï‰Î½.
  </footer>
</section>

<script>
  // ============================================================
  // EURO_GOALS v9.6.1 PRO+ â€” GoalMatrix Unified Controller
  // ============================================================
  const gmBody = document.getElementById("gm-body");
  const gmStatus = document.getElementById("gm-status-pill");
  const gmTotal = document.getElementById("gm-summary-total");
  const gmUpdated = document.getElementById("gm-summary-updated");
  const gmRefresh = document.getElementById("gm-refresh");

  async function loadGoalMatrix() {
    try {
      const res = await fetch("/api/goalmatrix/summary");
      const data = await res.json();
      const items = data.matches || data.summary || [];
      const active = data.status === "ok" || items.length > 0;

      gmStatus.textContent = active ? "Î•Î½ÎµÏÎ³ÏŒ" : "Î‘Î½ÎµÎ½ÎµÏÎ³ÏŒ";
      gmStatus.className =
        "px-2 py-1 rounded text-xs " +
        (active ? "bg-emerald-500 text-black" : "bg-red-600 text-white");

      gmTotal.textContent = `Î‘Î³ÏÎ½ÎµÏ‚: ${items.length}`;
      gmUpdated.textContent =
        "Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·: " +
        new Date().toLocaleTimeString("el-GR", { hour12: false });

      if (!items.length) {
        gmBody.innerHTML = `<tr><td colspan="5" class="p-3 text-center text-gray-400">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÎ½ÎµÏÎ³Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î± GoalMatrix.</td></tr>`;
        return;
      }

      gmBody.innerHTML = items
        .slice(0, 10)
        .map((m) => {
          const league = m.league || "-";
          const match =
            m.match || `${m.home_team || "?"} vs ${m.away_team || "?"}`;
          const open = m.opening_odds ?? "-";
          const current = m.current_odds ?? "-";
          const move = m.movement || 0;
          const moveColor =
            move > 0
              ? "text-green-400"
              : move < 0
              ? "text-red-400"
              : "text-gray-300";

          return `
          <tr class="hover:bg-neutral-800/60 transition">
            <td class="p-2">${league}</td>
            <td class="p-2">${match}</td>
            <td class="p-2 text-right">${open}</td>
            <td class="p-2 text-right">${current}</td>
            <td class="p-2 text-center ${moveColor}">${move > 0 ? "+" + move : move}%</td>
          </tr>`;
        })
        .join("");
    } catch (err) {
      gmStatus.textContent = "Î£Ï†Î¬Î»Î¼Î±";
      gmStatus.className = "px-2 py-1 rounded text-xs bg-red-600 text-white";
      gmBody.innerHTML = `<tr><td colspan="5" class="p-3 text-center text-red-400">âš  Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ GoalMatrix Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½.</td></tr>`;
    }
  }

  gmRefresh.addEventListener("click", loadGoalMatrix);
  setInterval(loadGoalMatrix, 30000);
  window.addEventListener("load", loadGoalMatrix);
</script>
