<!-- ========================================================= -->
<!-- GOALMATRIX PANEL ‚Äì EURO_GOALS v9.5.4 PRO+ -->
<!-- ========================================================= -->
<div id="goalmatrix-panel" class="bg-white/80 backdrop-blur-md rounded-xl shadow p-4 mb-4">
  <h2 class="text-lg font-semibold mb-3 flex items-center">
    ‚öΩ GoalMatrix Engine
    <span id="goalmatrix-status" class="ml-3 text-sm text-gray-600">
      Checking status...
    </span>
  </h2>

  <div class="flex flex-wrap gap-2 mt-2">
    <button onclick="loadGoalMatrixStatus()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded">
      üîÅ Refresh
    </button>
    <button onclick="loadGoalMatrixProbabilities()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded">
      üìä Calculate Probabilities
    </button>
  </div>

  <div id="goalmatrix-results" class="mt-3 text-sm text-gray-800"></div>
</div>

<script>
  // ============================================================
  // GOALMATRIX PANEL SCRIPT
  // ============================================================

  async function loadGoalMatrixStatus() {
    try {
      const resp = await fetch("/api/goalmatrix/status");
      const data = await resp.json();
      const el = document.getElementById("goalmatrix-status");
      if (!el) return;

      if (data.error) {
        el.innerHTML = `üö´ Offline (${data.message || "No data"})`;
        el.style.color = "red";
      } else {
        el.innerHTML = `‚úÖ Active`;
        el.style.color = "green";
      }
    } catch (e) {
      console.error("GoalMatrix fetch error:", e);
    }
  }

  async function loadGoalMatrixProbabilities() {
    try {
      const resp = await fetch("/api/goalmatrix/probabilities");
      const data = await resp.json();
      const results = document.getElementById("goalmatrix-results");
      if (!results) return;

      if (data.error) {
        results.innerHTML = `<span style="color:red">‚ö†Ô∏è ${data.message}</span>`;
        return;
      }

      let html = "<table class='min-w-full text-left text-sm border border-gray-200 rounded'>";
      html += "<tr><th>Match</th><th>Over 2.5</th><th>Under 2.5</th></tr>";

      data.data.forEach(m => {
        html += `<tr><td>${m.match}</td><td>${m.over25}</td><td>${m.under25}</td></tr>`;
      });
      html += "</table>";

      results.innerHTML = html;
    } catch (err) {
      console.error(err);
    }
  }

  window.addEventListener("load", loadGoalMatrixStatus);
</script>
