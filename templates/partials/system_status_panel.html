<!-- ========================================================= -->
<!-- EURO_GOALS PRO+ â€” SYSTEM STATUS PANEL (v9.6.8 + PWA STATUS) -->
<!-- ========================================================= -->

<div class="system-status-panel text-gray-100 text-sm">
  <h3 class="text-lg font-semibold text-sky-400 mb-3">ğŸ©º System Status Monitor</h3>
  <table class="w-full border-collapse text-xs">
    <thead class="bg-neutral-800 text-sky-400">
      <tr>
        <th class="p-2 text-left">Î¥Ï€Î¿ÏƒÏÏƒÏ„Î·Î¼Î±</th>
        <th class="p-2 text-left">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
        <th class="p-2 text-left">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·</th>
      </tr>
    </thead>
    <tbody id="status-body">
      <tr><td colspan="3" class="p-3 text-center">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...</td></tr>
    </tbody>
  </table>
</div>

<script>
  async function loadSystemStatus() {
    const el = document.getElementById("status-body");
    try {
      const res = await fetch("/api/system/check");
      const data = await res.json();
      const engines = data.engines || {};
      const now = new Date().toLocaleTimeString("el-GR", { hour12: false });
      el.innerHTML = `
        ${Object.keys(engines).map(key => `
          <tr class="hover:bg-neutral-800/70 transition">
            <td class="p-2 font-semibold">${key}</td>
            <td class="p-2">${engines[key]}</td>
            <td class="p-2 text-gray-400">${now}</td>
          </tr>`).join("")}
      `;
    } catch (err) {
      el.innerHTML = `<tr><td colspan="3" class="p-3 text-center text-red-400">âš  Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚.</td></tr>`;
    }

    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ PWA ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ â€” Ï€ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚
    try {
      let pwaStatus = "N/A";
      if ("serviceWorker" in navigator) {
        const reg = await navigator.serviceWorker.getRegistration();
        pwaStatus = reg ? "Î•Î½ÎµÏÎ³ÏŒÏ‚" : "Î‘Î½ÎµÎ½ÎµÏÎ³ÏŒÏ‚";
      } else {
        pwaStatus = "ÎœÎ· Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Î¿";
      }
      const manifest = await fetch("/static/manifest.json");
      const manifestOK = manifest.ok ? "OK" : "Î£Ï†Î¬Î»Î¼Î±";

      el.innerHTML += `
        <tr class="border-t border-neutral-700 bg-neutral-900/40">
          <td class="p-2 font-semibold text-sky-400">PWA Service Worker</td>
          <td class="p-2">${pwaStatus}</td>
          <td class="p-2 text-gray-400">${new Date().toLocaleTimeString("el-GR",{hour12:false})}</td>
        </tr>
        <tr class="bg-neutral-900/40">
          <td class="p-2 font-semibold text-sky-400">PWA Manifest</td>
          <td class="p-2">${manifestOK}</td>
          <td class="p-2 text-gray-400">${new Date().toLocaleTimeString("el-GR",{hour12:false})}</td>
        </tr>
      `;
    } catch (err) {
      console.warn("PWA status error:", err);
    }
  }

  loadSystemStatus();
  setInterval(loadSystemStatus, 45000);
</script>
